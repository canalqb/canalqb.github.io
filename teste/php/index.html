<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>PHP WASM</title>
</head>
<body>
  <div id="output">Carregando PHP...</div>

  <script type="module">
    import { PhpWeb } from 'https://cdn.jsdelivr.net/npm/php-wasm@0.0.9-alpha-20/PhpWeb.mjs';

    const output = document.getElementById('output');
    let phpCode = '';
    let phpOutput = '';

    const php = new PhpWeb();

    php.addEventListener('output', e => {
      phpOutput += e.detail + '\n';
    });

    php.addEventListener('ready', async () => {
      await php.run(phpCode);
      output.innerHTML = phpOutput;
    });

    const response = await fetch('phps/infophp.php');
    phpCode = await response.text();
  </script>
</body>
</html>
