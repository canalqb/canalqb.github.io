<!DOCTYPE html>
<html>
<head><title>PHP em WASM</title></head>
<body>
  <pre id="output"></pre>

  <script type="module">
    import { PhpWeb } from 'https://cdn.jsdelivr.net/npm/php-wasm@0.0.9-alpha-20/PhpWeb.mjs';

    async function run() {
      const php = new PhpWeb();

      php.addEventListener('output', e => {
        document.getElementById('output').textContent += e.detail;
      });

      php.addEventListener('error', e => {
        document.getElementById('output').textContent += 'Error: ' + e.detail + '\n';
      });

      const exitCode = await php.run(`<?php echo "Olá, mundo! Rodando PHP no navegador!\\n"; ?>`);
      console.log('PHP saiu com código', exitCode);
    }

    run();
  </script>
</body>
</html>
